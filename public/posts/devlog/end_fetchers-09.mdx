---
title: 피격 시스템, 혈흔 효과, 최적화 작업
date: 2024-1-24
tags:
  - devlog
---
시간이 엄청 많이 지났네요.  
파일들을 정리하는 김에 지금까지 만들었던 게임들을 모아서 블로그에 올렸습니다. 
완성했다고 생각되는 게임만 일단 올렸는데, 미완성 게임도 언젠가 정리해서 올릴까 싶습니다. :)


---


## 피격 시스템

/imglist open
![[end_fetchers/09/proto.gif]]
![[end_fetchers/09/motion.gif]]
/imglist close

이 시스템을 만들기 위해서 공격 모션 몇 개 그리느라 이틀 날렸습니다. 매번 생각하지만 모션 그리는 데 시간이 제일 많이 소요되는 것 같네요.

![[end_fetchers/09/attack.gif]]

간단하게 구현한 피격 시스템. 시퀀스에서 히트박스 오브젝트를 끄고 키는 방법으로 구현했습니다. 잘 작동하지만 아직 효과가 없어서 밋밋하네요.


---


## 혈흔 효과

/imglist open
![[end_fetchers/09/ink.gif]]
![[end_fetchers/09/ink2.gif]]
/imglist close


혈흔 효과를 만들었습니다. 짧고 강렬하게! 만들려고 노력했습니다.

![[end_fetchers/09/ink3.gif]]

게임에 적용한 모습입니다. 완성은 아니지만 꽤 그럴듯하게 보이네요.  

새로 만들었던 것들 fake3d와 혈흔 효과를 적용하는데 정말 애먹었습니다. 
생각할 수 있는 모든 예외 처리 코드를 작성하는게 쉽지 않더군요...


---


## fake 3D 기능 최적화

![[end_fetchers/09/fake_3D.gif]]

fake 3D 관련 코드들을 대폭 수정했습니다. 
하나의 텍스쳐에 스프라이트를 몽땅 집어넣고 한 번에 계산해버리면 
시간을 대폭 줄일 수 있다는 것을 알아냈죠. 함수를 호출하는 횟수도 줄일 수 있고요.

![[end_fetchers/09/fake3d.png]]

원래 3ms 정도 소요했었는데 0.3ms 이내로 계산을 마치는 것을 확인할 수 있었습니다. 
이 정도면 부담없이 게임에 적용시킬 수 있습니다.

CPU와 GPU 사이의 딜레이를 생각하지 않고 코드를 작성한게 문제였나 봅니다.

![[end_fetchers/09/syringe.png]]

눈치채셨겠지만 주인공의 무기는 바로 주사기입니다. 무기마다 특수한 공격을 할 수 있도록 만들 예정입니다.


---

## 다음 목표

![[end_fetchers/09/apply_motion.gif]]

캐릭터 모션을 그리면서 이벤트 관련 시스템을 구축할까 싶네요. 이것까지 구현이 된다면 어느정도 워크플로우가 안정화될 것 같습니다.




매번 찾아와주셔서 정말 감사합니다.  
모두 즐거운 밤 되시길!